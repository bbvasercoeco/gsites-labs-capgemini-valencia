<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="TablaPaginada"
  description="Tabla cargada desde docs con paginacion y parametrizada."
  author_affiliation="Capgemini">
<Require feature="idi"/>
<Require feature="locked-domain" />
</ModulePrefs>
  
<UserPref name="_table_query_url" display_name="Data source url" required="true"/>
<UserPref name="_NumElemPorPagina" default_value="8" display_name="Número de elementos por página:" required="true"/>
  
<Content type="html"><![CDATA[

<script src="http://www.google.com/jsapi" type="text/javascript"></script>

<div id="tablediv" style="overflow: auto;">
	<img src="http://www.google.com/ig/images/spinner.gif"/>
</div>

<style type="text/css">
        .header{
            background: blue; color: white; font-size:18px; font-family:Arial;
        }
        
	table { border-collapse:collapse; width:100%;}
	table#tablaOculta{visibility:hidden;}
	td, th {  font-family: Arial, Helvetica, sans-serif;  font-size: 10pt;  padding: 2px 0.5em;  white-space: nowrap;}


	th.mainHeader {  background-color: #808080;  color: #ffffff;  text-align: left;}
	th a {  color: white;  text-decoration: none;}
	th a:visited {  color: white;}
	th a:active, th a:hover { color: #800000; text-decoration: underline;}
        tr {background: white; border-bottom: solid #E2E2E2; height: 50px;}
	tr.alternateRow {background: #F3F3F3; border-bottom:solid #E2E2E2; height: 50px;}
	.filaUltima{background: white; height: 50px; valign:center; text-align: right;}
	/*td.sortedColumn {background-color: #f0f0f0;}
	th.sortedColumn { background-color: #b0b0b0;}
	tr.alternateRow td.sortedColumn { background-color: #d0d0d0; } */
</style>

<script>
    
    var gadgetHelper = null;
    _IG_RegisterOnloadHandler(loadVisualizationAPI);
    var numElePag = 8;
	
    function loadVisualizationAPI() {
        google.load("visualization", "1", {"packages": ["table"]});
        google.setOnLoadCallback(sendQuery);
    }

    function sendQuery() {
        var prefs = new _IG_Prefs(); // User preferences
        //var urlTable = prefs.getString("_table_query_url");
        numElePag = prefs.getInt("_NumElemPorPagina");
        gadgetHelper = new google.visualization.GadgetHelper();
        var query = gadgetHelper.createQueryFromPrefs(prefs);
        query.send(handleQueryResponse);
    }

    function handleQueryResponse(response) {
        if (!gadgetHelper.validateResponse(response)) { return; }
            data = response.getDataTable();
            
    var cssClassNames = {
        'headerRow': 'header',
        'tableRow': '',
        'oddTableRow': 'beige-background',
        'selectedTableRow': 'orange-background large-font',
        'hoverTableRow': '',
        'headerCell': 'gold-border',
        'tableCell': '',
        'rowNumberCell': 'underline-blue-font'};
        
        var chart = new google.visualization.Table(document.getElementById('tablediv'));
        var options = {'showRowNumber': true, 'pageSize': numElePag, 'alternatingRowStyle': true, 'allowHtml': true, 'cssClassNames': cssClassNames};
        
        //chart.draw(data, options);
        chart.draw(data);
    }
</script>
]]>
</Content>
</Module>